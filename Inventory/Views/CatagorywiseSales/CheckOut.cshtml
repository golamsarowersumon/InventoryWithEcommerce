
@{
    ViewBag.Title = "CheckOut";
    Layout = "~/Views/Shared/_InitialLayout.cshtml";
}




<div class="container">
    <div class="row">
        <div class="col-md-4 order-md-2 mb-4">
            <h4 class="d-flex justify-content-between align-items-center mb-3">
                <span class="text-muted">Your cart</span>
                <span id="countitem" class="badge badge-secondary badge-pill"></span>
            </h4>

            <table id="tblitemview" class="table table-bordered" style="color:black">
                <thead>
                    <tr>
                        <th>Item Name</th>
                        <th>Quantity</th>
                        <th>Price</th>
                        <th>Sub Total</th>
                    </tr>

                </thead>
                <tbody></tbody>
                <tfoot>
                    <tr>
                        <th colspan="3">Item Total Price</th>
                        <th id="subtotalitem"></th>

                    </tr>
                    <tr>
                        <th colspan="4"><input type="checkbox" id="Shippingcheck" />&nbsp;Do You Want To Shipping</th>

                    </tr>
                    <tr id="shippinghideshow">
                        <th colspan="2">
                            <select class="custom-select d-block w-100" id="ddlcountry">
                                <option value="">Choose...</option>
                            </select>
                        </th>
                        <th colspan="2">
                            <select class="custom-select d-block w-100" id="ddldistric">
                                <option value="">Choose...</option>
                            </select>
                        </th>

                    </tr>
                    <tr id="shippingchargehideshow">
                        <th colspan="3">Shiping Charge</th>
                        <th id="txtshipingcharge"></th>

                    </tr>
                    <tr>
                        <th colspan="3">Total</th>
                        <th id="itemtotal"></th>

                    </tr>
                </tfoot>
            </table>

        </div>
        <div class="col-md-8 order-md-1">
            <h4 class="mb-3">Billing address</h4>
            <div class="needs-validation was-validated" novalidate="">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="firstName">First name</label>
                        <input type="text" class="form-control" id="firstName" />

                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="lastName">Last name</label>
                        <input type="text" class="form-control" id="lastName" />

                    </div>
                </div>



                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="firstName">Email</label>
                        <input type="email" class="form-control" id="firstName">

                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="lastName">Address</label>
                        <input type="text" class="form-control" id="lastName" />

                    </div>
                </div>
                <div class="row">
                    <div class="col-md-5 mb-3">
                        <label for="country">Country</label>
                        <select class="custom-select d-block w-100" id="ddlcountryforbiling">
                            <option value="">Choose...</option>
                        </select>

                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="state">District</label>
                        <select class="custom-select d-block w-100" id="ddldistricforbiling">
                            <option value="">Choose...</option>
                        </select>

                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="zip">Zip</label>
                        <input type="text" class="form-control" id="zip">

                    </div>
                </div>



                <hr class="mb-4">

                <h4 class="mb-3">Payment</h4>
                <div class="row">
                    <div class="col-lg-3">
                        <div>
                            <input id="credit" name="paymentMethod" type="radio" />
                            <label for="credit">Credit card</label>
                        </div>
                        <div>
                            <input id="debit" name="paymentMethod" type="radio" />
                            <label for="debit">Debit card</label>
                        </div>
                        <div>
                            <input id="paypal" name="paymentMethod" type="radio" />
                            <label for="paypal">PayPal</label>
                        </div>
                    </div>
                    <div class="col-lg-9 row">
                        <div class="col-md-6 mb-3">
                            <label for="cc-name">Name on card</label>
                            <input type="text" class="form-control" id="cc-name" />

                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="cc-number">Credit card number</label>
                            <input type="text" class="form-control" id="cc-number" />

                        </div>

                        <div class="col-md-6">
                            <label for="cc-expiration">Expiration</label>
                            <input type="text" class="form-control" id="cc-expiration" />
                        </div>

                        <div class="col-md-6 row">
                            <div class="col-md-8">
                                <label for="cc-expiration">Expiration</label>
                                <input type="text" class="form-control" id="cc-expiration" />
                            </div>
                            <div class="col-md-4">
                                <div class="button-group-area mt-40" style="margin-top:15px;">
                                    <a href="#" class="genric-btn success large">Confirm</a>
                                </div>
                            </div>

                        </div>
                    </div>

                </div>
                <hr class="mb-4">

            </div>
        </div>
    </div>
</div>


@section Scripts{

    <script>
        $(document).ready(function () {

            carteditem();
            LoadCountry();

            $("#shippinghideshow").hide();
            $("#shippingchargehideshow").hide();


        })




        function carteditem() {
            var size = JSON.parse(localStorage['cartlist']);

            $("#countitem").text(size.length);

            $("#tblitemview tbody").empty();
            var Itemtotal = 0;

            $.each(size, function (i, v) {

                Itemtotal += v.SoPrice * v.ItemQuantity;
                $("#subtotalitem").text(Itemtotal);
                $("#itemtotal").text(Itemtotal);
                $("#tblitemview tbody").append(
                    "<tr><td>" + v.ItemName + "</td><td>" + v.ItemQuantity + "</td><td>" + v.SoPrice + "</td><td>" + v.SoPrice * v.ItemQuantity + "</td></tr>"

                );
            })

        }

        function LoadCountry() {
            $.ajax({

                url: "/CatagorywiseSales/CountryLoad",
                type: "Get",
                contentType: "application/json;charset=utf-8",
                dataType: "json",
                success: function (data) {
                    $("#ddlcountry").empty().append("<option value=''>Select Country</option>");
                    $("#ddlcountryforbiling").empty().append("<option value=''>Select Country</option>");
                    for (var i = 0; i < data.length; i++) {

                        $("#ddlcountry").append(
                            "<option value=" + data[i].CountryId + ">" + data[i].CountryName + "</option>"
                        )
                        $("#ddlcountryforbiling").append(
                            "<option value=" + data[i].CountryId + ">" + data[i].CountryName + "</option>"
                        )

                    }
                },
                error: function (errormessage) {
                    //alert(errormessage.responseText);
                }

            });

        }

        $("#ddlcountryforbiling").change(function () {
            var countryid = $("#ddlcountryforbiling").val();
            $.ajax({

                url: "/CatagorywiseSales/countrywisedistricload?id=" + countryid,
                type: "Get",
                contentType: "application/json;charset=utf-8",
                dataType: "json",
                success: function (data) {
                    $("#ddldistricforbiling").empty().append("<option value=''>Select District</option>");
                    for (var i = 0; i < data.length; i++) {

                        $("#ddldistricforbiling").append(
                            "<option value=" + data[i].DistrictId + ">" + data[i].DistrictName + "</option>"
                        )


                    }
                },
                error: function (errormessage) {
                    //alert(errormessage.responseText);
                }

            });
        })


        $("#ddlcountry").change(function () {
            var countryid = $("#ddlcountry").val();
            $.ajax({

                url: "/CatagorywiseSales/countrywisedistricload?id=" + countryid,
                type: "Get",
                contentType: "application/json;charset=utf-8",
                dataType: "json",
                success: function (data) {
                    $("#ddldistric").empty().append("<option value=''>Select District</option>");
                    for (var i = 0; i < data.length; i++) {

                        $("#ddldistric").append(
                            "<option value=" + data[i].DistrictId + ">" + data[i].DistrictName + "</option>"
                        )


                    }
                },
                error: function (errormessage) {
                    //alert(errormessage.responseText);
                }

            });
        })

        $("#ddldistric").change(function () {
            var distid = $("#ddldistric").val();
            $.ajax({

                url: "/CatagorywiseSales/districtwiseshippingcharge?id=" + distid,
                type: "Get",
                contentType: "application/json;charset=utf-8",
                dataType: "json",
                success: function (data) {
                    $("#txtshipingcharge").text(data.ShippingCharge);

                    var itemtotalprice = parseFloat($("#subtotalitem").text());
                    $("#itemtotal").text(itemtotalprice + data.ShippingCharge);

                },
                error: function (errormessage) {
                    //alert(errormessage.responseText);
                }

            });
        })


        $('#Shippingcheck').click(function () {
            if ($('#Shippingcheck').is(":checked")) {
                $("#shippinghideshow").show();
                $("#shippingchargehideshow").show();

            } else {
                $("#shippinghideshow").hide();
                $("#shippingchargehideshow").hide();

                $("#itemtotal").text($("#subtotalitem").text());



                shippingclear();

            }
        })


        function shippingclear() {
            LoadCountry();
            $("#ddldistric").empty();
            $("#txtshipingcharge").text("");
        }

    </script>


}