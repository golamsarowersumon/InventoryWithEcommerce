
@{
    ViewBag.Title = "Index";
}
<br />
<div class="container col-lg-offset-1"> 

    <div>
        <select id="ddlstore" class="form-control">
            <option>Select Store</option>
        </select>
    </div>


    <table id="tbl" class="table table-bordered">
        <thead>
            <tr>

                <th>Item Name</th>
                <th>Available Stock</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>


</div>





@section Scripts{
<script>
    $(document).ready(function () {

        loadStore();
    })




    function loadStore() {
        $.ajax({

            url: "Stock/ShowStore",
            type: "Get",
            contentType: "application/json;charset=utf-8",
            dataType: "json",
            success: function (data) {
                console.log(data);
                for (var i = 0; i < data.length; i++) {

                    $("#ddlstore").append("<option value=" + data[i].StoreId + ">" + data[i].StoreName + "</option>")
                }
            },
            error: function (errormessage) {
                //alert(errormessage.responseText);
            }

        });

    }



    $("#ddlstore").change(function () {
        var itemid = ($(this).val());

        $.ajax({
            url: "Stock/Showstockbystore?id=" + itemid,
            type: "Get",
            contentType: "application/json;charset=utf-8",
            dataType: "json",
            success: function (data) {
                console.log(data);
                $("#tbl tbody").empty();
                $.each(data, function (i, v) {
                    $("#tbl tbody").append(

                        "<tr><td>"+ v.ItemName + "</td><td>" + v.PO_QTD+"</td></tr>"
                    )
                })

            },
            error: function (errormessage) {
                //alert(errormessage.responseText);
            }

        });
    })

</script>
}